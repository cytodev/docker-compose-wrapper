container-${container_name}:
  image: \${INSTANCE_NAME:-unnamed}:${container_name}\${${container_from_name^^}_VERSION}
  container_name: \${INSTANCE_NAME:-unnamed}-${container_name}\${${container_from_name^^}_VERSION}
  hostname: ${container_name}
  restart: unless-stopped
  working_dir: ${working_dir}
  network_mode: host
  build:
    args:
      - ARG_USER_ID=\${USER_ID:-1000}
      - ARG_GROUP_ID=\${GROUP_ID:-1000}
      - ARG_${container_from_name^^}_VERSION=\${${container_from_name^^}_VERSION:-latest}
    context: ./
    dockerfile: ./containers/${container_name}/Dockerfile
    network: host
  volumes:
    - /etc/localtime:/etc/localtime:ro
    - /etc/hosts:/etc/hosts:ro
    - \${USER_HIST_FILE:-/tmp/.dockerw_history}:/home/development/.bash_history
    - data:/mnt/data
    - cache:/home/development/.cache
    - config:/home/development/.config
    - ssh:/home/development/.ssh
    - logs:/var/log
    - shared:/shared
